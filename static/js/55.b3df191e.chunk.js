"use strict";(self.webpackChunkterafly=self.webpackChunkterafly||[]).push([[55],{30545:function(e,t,n){n.d(t,{AE:function(){return v},Ad:function(){return y},CL:function(){return j},GM:function(){return p},GT:function(){return E},NO:function(){return r},Ol:function(){return N},S9:function(){return h},Tb:function(){return I},W4:function(){return O},WT:function(){return Z},Z4:function(){return l},bn:function(){return _},d:function(){return d},fk:function(){return k},mq:function(){return L},xc:function(){return M}});var i=n(74165),a=n(15861),s=n(68054);function r(e){return o.apply(this,arguments)}function o(){return(o=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/show-streaming-no-pagination",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return c.apply(this,arguments)}function c(){return(c=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/show-streaming-pagination",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return u.apply(this,arguments)}function u(){return(u=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/categories-genre/",{method:"GET"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/".concat(t),{method:"GET"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return f.apply(this,arguments)}function f(){return(f=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/authen/".concat(t),{method:"GET"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/streaming-episodes/get-all-episodes-of-streaming",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/season/get-all-season-of-streaming",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/season/".concat(t),{method:"GET"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/vote/get-vote",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return S.apply(this,arguments)}function S(){return(S=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/vote/get-vote-no-authen",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return C.apply(this,arguments)}function C(){return(C=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/vote/picking-vote",{method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return D.apply(this,arguments)}function D(){return(D=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/comment/create",{method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return A.apply(this,arguments)}function A(){return(A=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/comment/get-list-comment-by-episodes",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return F.apply(this,arguments)}function F(){return(F=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/comment/get-list-comment-by-episodes-no-authen",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return V.apply(this,arguments)}function V(){return(V=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/comment/heart",{method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return T.apply(this,arguments)}function T(){return(T=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/like/",{method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return B.apply(this,arguments)}function B(){return(B=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("/web-app/streaming/bookmark/",{method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},50070:function(e,t,n){n.r(t),n.d(t,{default:function(){return ve}});var i=n(74165),a=n(15861),s=n(29439),r=n(47313),o=n(97890),l=n(95143),c=n(24511),d=n(9346),u=n(59491),p=n(59417),m=n(1084),v=n(38616),f=n(9274),h=n(45705),x=n(88363),Z=n(46417),g=function(e){var t=e.openModal,n=e.setOpenModal,i=r.useState(!1),a=(0,s.Z)(i,2),d=a[0],u=a[1],p=(0,c.$)(),m=(0,s.Z)(p,1)[0],v=(0,o.s0)(),g=(0,x.Z)().width,j=function(){n(!1)};return(0,r.useEffect)((function(){u(1==t)}),[t]),(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(f.Z,{className:"fix-footer-modal",centered:!0,visible:d,onCancel:j,footer:(0,Z.jsxs)(h.Z,{className:"flex_row footer-content",children:[(0,Z.jsx)("div",{onClick:function(){j()},"aria-hidden":"true",className:"button_cancel",children:m(l.y0.cancel)}),(0,Z.jsx)("div",{className:"button_confirm",onClick:function(){v(g>768?"/login":"/login-method")},"aria-hidden":"true",children:m(l.y0.confirm)})]}),children:[(0,Z.jsx)("h1",{style:{display:"flex",justifyContent:"center",fontWeight:700},children:m(l.y0.sign_in_required)}),(0,Z.jsxs)("div",{className:"flex_column ",style:{justifyContent:"center",alignItems:"center",fontSize:16},children:[(0,Z.jsx)("div",{children:m(l.y0.login_is_required)}),(0,Z.jsxs)("div",{children:[m(l.y0.do_you_want_login)," "]})]})]})})},j=n(70816),w=n.n(j),y=n(68054);function b(e){return _.apply(this,arguments)}function _(){return(_=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,y.Z)("/web-app/streaming/streaming-episodes/calculator-view",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,y.Z)("/web-app/streaming/streaming-episodes/calculator-click",{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=n(27392),C=n(41905),N=n(68992);var D=(0,m.$j)((function(e){return{account:v.w.account.select(e)}}))((function(e){var t,n,i,a=e.idFilm,o=e.seasonSelect,d=e.setSelectEpsiodeFilm,m=e.selectEpsiodeFilm,v=e.dataAllEpisodesAndSeasonOfFilm,f=e.account,h=e.playVideo,x=e.setPlayVideo,j=e.filmDetail,y=(0,c.$)(),_=(0,s.Z)(y,1)[0],S=!!(null!==j&&void 0!==j&&null!==(t=j.category)&&void 0!==t&&t.name_eng&&["short movie","music video"].indexOf(j.category.name_eng)<0),D=(0,r.useState)(!1),E=(0,s.Z)(D,2),A=E[0],I=E[1];return(0,Z.jsx)("div",{className:"describe_episode_scroll",children:null===(n=v.filter((function(e){return e.numberSeason==o})))||void 0===n||null===(i=n.reverse())||void 0===i?void 0:i.map((function(e){return m==e.number?(console.log(e),(0,Z.jsxs)("div",{className:"describe_each_episode",onClick:function(){d(e.number)},children:[(0,Z.jsxs)("div",{className:"container ",children:[(0,Z.jsx)(N.Z,{src:"korean"==C.Z.language?e.thumbnailImageDomesticEpisodes:e.thumbnailImageOverseaEpisodes,style:{height:"height: calc(50% * 112 / 184)"},alt:"image_film",className:"img"}),(0,Z.jsx)("div",{className:"overlay"})]}),(0,Z.jsxs)("div",{className:"describe_each_episode_content",children:[(0,Z.jsxs)("div",{className:"describe_each_episode_content_episodes",style:{display:S?"":"none"},children:[" ","korean"==C.Z.language?"".concat(e.number,"\ud654"):"Epsiode ".concat(e.number)]}),(0,Z.jsxs)("div",{className:"describe_each_episode_content_information",children:[(0,Z.jsx)("div",{children:"korean"==C.Z.language?"".concat(w()(e.createdAt).locale("ko").format("MMMM Do")," \uacf5\uac1c"):"".concat(w()(e.createdAt).locale("en").format("MMMM Do")," open")}),(0,Z.jsx)("div",{style:{paddingTop:10},children:(0,Z.jsx)(u.Z,{type:"primary",onClick:function(){if(f){if(!h){var e,t,n=null===v||void 0===v||null===(e=v.filter((function(e){return e.numberSeason==o}))[0])||void 0===e?void 0:e.seasonID,i=null===v||void 0===v||null===(t=v.filter((function(e){return e.number==m&&e.numberSeason==o}))[0])||void 0===t?void 0:t._id;b({streamingID:a,seasonID:n,streamingEpisodesID:i})}x(!0),window.scrollTo({top:0,left:0,behavior:"smooth"})}else I(!0)},children:_(l.y0.play)})}),(0,Z.jsx)(g,{openModal:A,setOpenModal:I})]})]})]},e._id)):(0,Z.jsxs)("div",{className:"describe_each_episode",onClick:function(){d(e.number)},children:[(0,Z.jsxs)("div",{className:"container ",children:[(0,Z.jsx)(N.Z,{src:"korean"==C.Z.language?e.thumbnailImageDomesticEpisodes:e.thumbnailImageOverseaEpisodes,alt:"image_film",className:"img"}),(0,Z.jsx)("div",{className:"overlay"})]}),(0,Z.jsxs)("div",{className:"describe_each_episode_content",children:[(0,Z.jsx)("div",{className:"describe_each_episode_content_episodes",style:{display:S?"":"none"},children:"korean"==C.Z.language?"".concat(e.number,"\ud654"):"Epsiode ".concat(e.number)}),(0,Z.jsxs)("div",{className:"describe_each_episode_content_information",children:[(0,Z.jsx)("div",{children:e.time}),(0,Z.jsx)(p.Z,{className:"overtext_episode_content_information",placement:"bottom",overlayInnerStyle:{color:"black",backgroundColor:"white"},title:(0,k.DE)(e,"storyEpisode"),children:(0,k.DE)(e,"storyEpisode")})]})]})]},e._id)}))})})),E=n(70026);var A=function(e){var t,n=e.idFilm,i=e.dataAllSeasonOfFilm,a=e.filmDetail,r=e.seasonSelect,o=e.setSeasonSelect,u=e.selectEpsiodeFilm,p=e.dataAllEpisodesAndSeasonOfFilm,m=e.setSelectEpsiodeFilm,v=e.width,f=e.playVideo,h=e.setPlayVideo,x=(0,c.$)(),g=(0,s.Z)(x,1)[0],j=!!(null!==a&&void 0!==a&&null!==(t=a.category)&&void 0!==t&&t.name_eng&&["short movie","music video"].indexOf(a.category.name_eng)<0),w=function(e,t,n){return e||null===t||void 0===t||!t.category?n(l.y0.episodesTitle):n(0===["short movie","music video"].indexOf(t.category.name_eng)?l.y0.shortMovie:l.y0.musicVideo)}(j,a,g);return(0,Z.jsxs)("div",{className:"episode_contain",children:[(0,Z.jsxs)("div",{className:"episode_title",children:[(0,Z.jsx)("div",{className:"episode_title_main",children:w}),!a&&(0,Z.jsx)(E.Z,{}),a&&r&&i&&j&&(0,Z.jsx)("div",{className:"episode_season",children:(0,Z.jsx)(d.Z,{defaultValue:r,onChange:function(e){o(e)},style:{width:"100%",position:"relative"},children:null===i||void 0===i?void 0:i.map((function(e,t){return(0,Z.jsx)(d.Z.Option,{value:e.number,children:"".concat(g(l.y0.season)," ").concat(e.number)},t)}))})})]}),(0,Z.jsxs)("div",{className:"list_of_episodes",children:[!p&&(0,Z.jsx)(E.Z,{}),p&&(0,Z.jsx)(D,{idFilm:n,width:v,dataAllEpisodesAndSeasonOfFilm:p,seasonSelect:r,setSelectEpsiodeFilm:m,selectEpsiodeFilm:u,playVideo:f,setPlayVideo:h,filmDetail:a})]})]})},I=function(e){var t=e.filmDetail,n=e.seasonSelect,i=e.selectEpsiodeFilm,a=(0,c.$)(),r=(0,s.Z)(a,1)[0];return(0,Z.jsxs)("div",{className:"basic_infomation_film",children:[(0,Z.jsx)("div",{className:"name_film",children:(0,k.DE)(t,"title")}),(0,Z.jsxs)("div",{className:"infomation_season_epsiode",children:[(0,Z.jsx)("div",{className:"infomatiom_all",children:r(l.y0.all)}),n>=1&&"web drama"==t.category.name_eng&&(0,Z.jsx)("div",{className:"infomation_season",children:"korean"==C.Z.language?"\uc2dc\uc98c ".concat(n):"Season ".concat(n)}),i>=1&&"web drama"==t.category.name_eng&&(0,Z.jsx)("div",{className:"infomation_epsiode",children:"korean"==C.Z.language?"\uc5d0\ud53c\uc18c\ub4dc ".concat(i):"Epsiode ".concat(i)})]}),(0,Z.jsx)("div",{className:"infomation_desciption",dangerouslySetInnerHTML:{__html:(0,k.DE)(t,"story").replaceAll("<p></p>","<br />").replaceAll("\n","<br />")}})]})},F=r.memo(I),O=n(70655),V=n(1711),M=n(2322),T=n(30545),L=function(e){var t=e.isliked,n=e.numberLike,l=e.account,c=e.commentID,d=e.streamingEpisodesID,p=(0,r.useState)(!1),m=(0,s.Z)(p,2),v=m[0],f=m[1],x=(0,o.UO)().id,j=(0,r.useState)(null),w=(0,s.Z)(j,2),y=w[0],b=w[1],_=(0,r.useState)(t),S=(0,s.Z)(_,2),k=S[0],C=S[1],N=(0,r.useState)(n),D=(0,s.Z)(N,2),E=D[0],A=D[1];return(0,r.useEffect)((function(){if(y){if(A(null===y||void 0===y?void 0:y.quantityHeart),null!==y&&void 0!==y&&y.isHeart)return void C(!0);C(!1)}return function(){C(k),A(n)}}),[y]),(0,Z.jsxs)(h.Z,{size:5,align:"center",className:"like_number",children:[(0,Z.jsxs)(u.Z,{onClick:(0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=3;break}return f(!0),e.abrupt("return");case 3:return e.next=5,(0,T.W4)({streamingID:x,streamingEpisodesID:d,commentID:c});case 5:200==(t=e.sent).status&&(b(t.data.data),C(!k));case 7:case"end":return e.stop()}}),e)}))),children:[k&&(0,Z.jsx)(M.Z,{style:{color:"#BDC5CB"}}),!k&&(0,Z.jsx)("svg",{width:"14",height:"13",viewBox:"0 0 14 13",fill:"#eb2f96",xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{d:"M6.99982 1.06406C6.27343 0.396127 5.32263 0.0254217 4.33582 0.0253906C3.81352 0.0259344 3.29647 0.129764 2.81445 0.330903C2.33242 0.532042 1.89493 0.82652 1.52716 1.19739C-0.041509 2.77272 -0.0408424 5.23672 1.52849 6.80539L6.41649 11.6934C6.52982 11.8927 6.74849 12.0214 6.99982 12.0214C7.10302 12.0204 7.20455 11.9952 7.29625 11.9478C7.38795 11.9005 7.46726 11.8323 7.52782 11.7487L12.4712 6.80539C14.0405 5.23606 14.0405 2.77272 12.4698 1.19472C12.1022 0.824535 11.6651 0.530655 11.1835 0.329979C10.702 0.129304 10.1855 0.0257904 9.66383 0.0253906C8.67704 0.0255519 7.72629 0.396239 6.99982 1.06406ZM11.5272 2.13739C12.5692 3.18472 12.5698 4.82072 11.5285 5.86272L6.99982 10.3914L2.47116 5.86272C1.42982 4.82072 1.43049 3.18472 2.46982 2.14006C2.97649 1.63606 3.63916 1.35872 4.33582 1.35872C5.03249 1.35872 5.69249 1.63606 6.19516 2.13872L6.52849 2.47206C6.59035 2.53402 6.66382 2.58318 6.7447 2.61672C6.82557 2.65026 6.91227 2.66752 6.99982 2.66752C7.08738 2.66752 7.17408 2.65026 7.25495 2.61672C7.33583 2.58318 7.4093 2.53402 7.47116 2.47206L7.80449 2.13872C8.81249 1.13272 10.5205 1.13539 11.5272 2.13739Z",fill:"#BDC5CB"})})]}),(0,Z.jsx)(g,{openModal:v,setOpenModal:f}),(0,Z.jsx)("div",{children:E})]})},B=n(12196),q=n(86948),G=(n(41971),n(82374));G.tz.setDefault("Asia/Seoul");var P=function(e){var t,n=e.createdNewCmt,u=e.setCreatedNewCmt,p=e.account,m=e.selectEpsiodeFilm,v=e.dataAllEpisodesAndSeasonOfFilm,f=e.seasonSelect,x=(0,c.$)(),g=(0,s.Z)(x,1)[0],j=(0,r.useState)(!1),w=(0,s.Z)(j,2),y=w[0],b=w[1],_=(0,r.useState)(null),S=(0,s.Z)(_,2),k=S[0],N=S[1],D=(0,r.useState)([]),A=(0,s.Z)(D,2),I=A[0],F=A[1],O=(0,r.useState)(1),V=(0,s.Z)(O,2),M=V[0],P=V[1],z=(0,r.useState)(!0),H=(0,s.Z)(z,2),R=H[0],W=H[1],$=(0,r.useState)(2),U=(0,s.Z)($,2),Y=U[0],X=U[1],K=(0,r.useState)(!1),Q=(0,s.Z)(K,2),J=Q[0],ee=Q[1],te=(0,o.UO)().id,ne=null===v||void 0===v||null===(t=v.filter((function(e){return e.number==m&&e.numberSeason==f}))[0])||void 0===t?void 0:t._id,ie=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,a,s,r,o,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee(!1),!p){e.next=7;break}return e.next=4,(0,T.GT)({limit:5,page:M,keySort:2==Y?"createdAt":"quantityHeart",streamingEpisodesID:ne,streamingID:te});case 4:return 200==(t=e.sent).status&&(0==(null===(n=t.data)||void 0===n?void 0:n.data.docs.length)&&(ee(!0),W(!1)),F(null===(a=t.data)||void 0===a?void 0:a.data.docs),N(null===(s=t.data)||void 0===s?void 0:s.data)),e.abrupt("return");case 7:return e.next=9,(0,T.Tb)({limit:5,page:M,keySort:2==Y?"createdAt":"quantityHeart",streamingEpisodesID:ne,streamingID:te});case 9:200==(r=e.sent).status&&(0==(null===(o=r.data)||void 0===o?void 0:o.data.docs.length)&&(ee(!0),W(!1)),F(null===(l=r.data)||void 0===l?void 0:l.data.docs),N(null===(c=r.data)||void 0===c?void 0:c.data));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,a,s,r,o,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W(!0),ee(!1),!p){e.next=8;break}return e.next=5,(0,T.GT)({limit:5,page:1,keySort:2==Y?"createdAt":"quantityHeart",streamingEpisodesID:ne,streamingID:te});case 5:return 200==(t=e.sent).status&&(0==(null===(n=t.data)||void 0===n?void 0:n.data.docs.length)&&(ee(!0),W(!1)),F(null===(a=t.data)||void 0===a?void 0:a.data.docs),N(null===(s=t.data)||void 0===s?void 0:s.data)),e.abrupt("return");case 8:return e.next=10,(0,T.Tb)({limit:5,page:1,keySort:2==Y?"createdAt":"quantityHeart",streamingEpisodesID:ne,streamingID:te});case 10:200==(r=e.sent).status&&(0==(null===(o=r.data)||void 0===o?void 0:o.data.docs.length)&&(ee(!0),W(!1)),F(null===(l=r.data)||void 0===l?void 0:l.data.docs),N(null===(c=r.data)||void 0===c?void 0:c.data));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){W(!0),ie()}),[v,f,m,te,Y]);return(0,r.useEffect)((function(){P(1),n&&(ae(),Promise.all([ae]).then((function(){u(!1)})))}),[n]),(0,r.useEffect)((function(){I.length>0&&ee(!1)}),[I]),console.log("items",I),(0,Z.jsxs)("div",{className:"list_comment",children:[(0,Z.jsxs)("div",{className:"refresh_sort",children:[(0,Z.jsxs)("div",{className:"refresh",onClick:function(){N(null),P(1),b(!0),ae(),Promise.all([ae]).then((function(){setTimeout((function(){b(!1)}),1e3)}))},"aria-hidden":"true",children:[(0,Z.jsx)(B.Z,{style:{color:"#bdc5cb"},spin:y}),(0,Z.jsx)("div",{className:"text_refresh",children:g(l.y0.refresh)})]}),(0,Z.jsx)("div",{className:"sort",children:(0,Z.jsxs)(d.Z,{value:Y,onChange:function(e){N(null),P(1),X(e)},children:[(0,Z.jsx)(d.Z.Option,{value:1,children:g(l.y0.popular)}),(0,Z.jsx)(d.Z.Option,{value:2,children:g(l.y0.latest)})]})})]}),(0,Z.jsxs)("div",{className:"content_list_comment",children:[!k&&(0,Z.jsx)("div",{style:{marginTop:20},children:(0,Z.jsx)(E.Z,{})}),J&&(0,Z.jsx)("div",{children:g(l.y0.firstComment)}),I&&(0,Z.jsx)("div",{children:(0,Z.jsx)(q.Z,{dataLength:I.length,next:function(){setTimeout((0,a.Z)((0,i.Z)().mark((function e(){var t,n,a,s,r,o,l,c,d,u,m;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=M+1,!p){e.next=9;break}return e.next=4,(0,T.GT)({page:r,limit:5,keySort:2==Y?"createdAt":"quantityHeart",streamingEpisodesID:ne,streamingID:te});case 4:return u=e.sent,(null===(o=u.data)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.docs.length)<5&&W(!1),F(I.concat(null===(c=u.data)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.docs)),P(r),e.abrupt("return");case 9:return e.next=11,(0,T.Tb)({page:r,limit:5,keySort:2==Y?"createdAt":"quantityHeart",streamingEpisodesID:ne,streamingID:te});case 11:m=e.sent,(null===(t=m.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.docs.length)<5&&W(!1),F(I.concat(null===(a=m.data)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.docs)),P(r);case 15:case"end":return e.stop()}}),e)}))),250)},hasMore:R,height:400,loader:(0,Z.jsx)("div",{children:g(l.y0.loading)}),children:I.map((function(e){var t,n;return(0,Z.jsxs)(h.Z,{direction:"horizontal",align:"start",className:"component_comment",children:[(0,Z.jsx)("div",{children:(0,Z.jsx)("img",{src:(null===(t=e.userID)||void 0===t?void 0:t.avatar)||"https://iupac.org/wp-content/uploads/2018/05/default-avatar.png",alt:"avatar",className:"avatar_comment"})}),(0,Z.jsxs)("div",{className:"content_main_comment",children:[(0,Z.jsx)("div",{className:"user_name",children:null===(n=e.userID)||void 0===n?void 0:n.userName}),(0,Z.jsx)("div",{style:{color:"#BDC5CB",wordWrap:"break-word"},children:e.content}),(0,Z.jsxs)(h.Z,{direction:"horizontal",className:"like_time_number",children:[(0,Z.jsx)("div",{style:{fontSize:12,color:"#BDC5CB",width:100},children:"korean"==C.Z.language?G.tz(e.createdAt,"Asia/Seoul").locale("ko").fromNow():G.tz(e.createdAt,"Asia/Seoul").locale("en").fromNow()}),(0,Z.jsx)(L,{commentID:e._id,streamingEpisodesID:ne,isliked:e.isHeart,numberLike:e.quantityHeart,account:p})]})]})]},e._id)}))})})]})]})},z=n(61724),H=V.Z.TextArea,R=(0,m.$j)((function(e){return{account:v.w.account.select(e)}}))((function(e){var t=e.account,n=e.selectEpsiodeFilm,d=e.dataAllEpisodesAndSeasonOfFilm,p=e.seasonSelect,m=(0,o.UO)().id,v=(0,c.$)(),f=(0,s.Z)(v,1)[0],h=(0,r.useState)(!1),x=(0,s.Z)(h,2),j=x[0],w=x[1],y=(0,r.useState)(""),b=(0,s.Z)(y,2),_=b[0],S=b[1],k=(0,r.useState)(!1),C=(0,s.Z)(k,2),N=C[0],D=C[1],E=(0,r.useState)(!1),A=(0,s.Z)(E,2),I=A[0],F=A[1],O=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,a,s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D(!0),_.trim()){e.next=4;break}return D(!1),e.abrupt("return");case 4:return s={streamingID:m,streamingEpisodesID:null===d||void 0===d||null===(t=d.filter((function(e){return e.number==n&&e.numberSeason==p}))[0])||void 0===t?void 0:t._id,content:_},e.next=7,(0,T.Ol)(s);case 7:1==(null===(r=e.sent)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.status)?(S(""),F(!0),D(!1)):(z.Z.error(f(l.N3.comment_failed)),D(!1));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)("div",{className:"comment_in_vote",children:[(0,Z.jsxs)("div",{className:"area_input_comment",children:[(0,Z.jsx)(H,{value:_,placeholder:f(l.y0.writeAComment),autoSize:{minRows:1,maxRows:6},onChange:function(e){S(e.target.value)}}),(0,Z.jsx)(u.Z,{onClick:function(){t?O():w(!0)},loading:N,disabled:!_.trim(),children:f(l.y0.comment)}),(0,Z.jsx)(g,{openModal:j,setOpenModal:w})]}),(0,Z.jsx)(P,{createdNewCmt:I,setCreatedNewCmt:F,account:t,selectEpsiodeFilm:n,seasonSelect:p,dataAllEpisodesAndSeasonOfFilm:d})]})})),W=n(93433),$=n(1413),U=n(39629),Y=function(e){var t=e.fill,n=e.width;return(0,Z.jsx)("svg",{width:n>768?"36":"24",height:n>768?"36":"24",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 36C27.9412 36 36 27.9412 36 18C36 8.05887 27.9412 0 18 0C8.05887 0 0 8.05887 0 18C0 27.9412 8.05887 36 18 36ZM26.5057 14.1307C27.1647 13.4717 27.1647 12.4033 26.5057 11.7443C25.8467 11.0853 24.7783 11.0853 24.1193 11.7443L15.1875 20.676L11.8807 17.3693C11.2217 16.7103 10.1533 16.7103 9.49426 17.3693C8.83525 18.0283 8.83525 19.0967 9.49426 19.7557L13.9943 24.2557C14.6533 24.9147 15.7217 24.9147 16.3807 24.2557L26.5057 14.1307Z",fill:t})})},X=n(77561),K=function(e){var t=e.width;return(0,Z.jsxs)("svg",{width:t>768?"1.4vw":"5.3vw",height:t>768?"1.4vw":"5.3vw",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Z.jsx)("path",{d:"M14 17.5C17.866 17.5 21 14.366 21 10.5C21 6.63401 17.866 3.5 14 3.5C10.134 3.5 7 6.63401 7 10.5C7 14.366 10.134 17.5 14 17.5Z",stroke:"white",strokeWidth:"2",strokeMiterlimit:"10"}),(0,Z.jsx)("path",{d:"M3.38867 23.624C4.46444 21.7619 6.01128 20.2158 7.87379 19.1408C9.73631 18.0659 11.8489 17.5 13.9994 17.5C16.1498 17.5 18.2624 18.066 20.1249 19.1409C21.9874 20.2159 23.5342 21.7621 24.61 23.6242",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})},Q=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],J=(0,m.$j)((function(e){return{account:v.w.account.select(e)}}))((function(e){var t,n,o,d,p,m,v=e.width,f=e.account,x=e.dataVote,j=e.setDataVote,y=(0,r.useState)([]),b=(0,s.Z)(y,2),_=b[0],S=b[1],C=(0,c.$)(),N=(0,s.Z)(C,1)[0],D=(0,r.useState)(!1),E=(0,s.Z)(D,2),A=E[0],I=E[1],F=(0,r.useState)(!1),O=(0,s.Z)(F,2),V=O[0],M=O[1],L=(0,r.useState)(!1),B=(0,s.Z)(L,2),q=B[0],G=B[1];(0,r.useEffect)((function(){var e,t;"623bdfd8798991010f784665"==(null===(e=x.vote)||void 0===e||null===(t=e.method)||void 0===t?void 0:t._id)&&G(!0)}),[x]);var P=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I(!0),f){e.next=5;break}return I(!1),M(!0),e.abrupt("return");case 5:if(0!=_.length){e.next=9;break}return z.Z.error(N(l.N3.please_choose)),I(!1),e.abrupt("return");case 9:return n={streamingID:x.vote.streamingID,seasonID:x.voteOption[0].seasonID,streamingEpisodesID:x.vote.streamingEpisodesID,voteID:x.vote._id,voteOptionArray:_},e.next=12,(0,T.fk)(n);case 12:a=e.sent,console.log("response",a),1==(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.status)?(j((0,$.Z)({isVote:!0},null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.data)),I(!1)):(z.Z.error(N(l.N3.voting_failed)),I(!1));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)("div",{children:[(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{className:"desciption_vote_title",children:null!==x&&void 0!==x&&x.vote?(0,k.DE)(null===x||void 0===x?void 0:x.vote,"title"):null}),(0,Z.jsx)("div",{className:"desciption_vote_describe",children:null!==x&&void 0!==x&&x.vote?(0,k.DE)(null===x||void 0===x?void 0:x.vote,"content"):null})]}),(0,Z.jsx)("div",{style:{paddingTop:24,paddingBottom:10},className:"period_vote",children:"".concat(N(l.y0.period),":   ").concat(null!==x&&void 0!==x&&null!==(t=x.vote)&&void 0!==t&&t.startDate?w()(null===x||void 0===x||null===(n=x.vote)||void 0===n?void 0:n.startDate).format("YYYY.MM.DD"):"..."," ~ ").concat(null!==x&&void 0!==x&&null!==(o=x.vote)&&void 0!==o&&o.endDate?w()(null===x||void 0===x||null===(d=x.vote)||void 0===d?void 0:d.endDate).format("YYYY.MM.DD"):"...")}),(0,Z.jsxs)(h.Z,{size:8,direction:"vertical",className:"w-100",children:[null===x||void 0===x||null===(p=x.voteOption)||void 0===p?void 0:p.map((function(e,t){return(0,Z.jsxs)("div",{className:"image_vote_product",children:[(0,Z.jsxs)("div",{className:"unvoted_show",children:[(0,Z.jsx)(U.Z,{src:e.image,className:"vote_img",alt:"productImage"}),(0,Z.jsxs)("div",{className:"detailVote",children:[(0,Z.jsxs)("div",{className:"name_product",children:["".concat(Q[t],". "),(0,k.DE)(e,"data")]}),x.isVote&&(0,Z.jsxs)("div",{className:"voting_results",children:[(0,Z.jsx)("div",{className:"text_voted_average",children:"".concat(e.quantity==x.vote.quantity?100:(e.quantity/x.vote.quantity*100).toFixed(0),"%")}),(0,Z.jsx)("div",{children:(0,Z.jsx)(X.Z,{color:"#FE9738",number:Number(e.quantity==x.vote.quantity?100:(e.quantity/x.vote.quantity*100).toFixed(0))})})]})]})]}),(0,Z.jsx)("div",{className:"button_before_voted",children:(0,Z.jsx)(u.Z,{onClick:function(){return q?_.indexOf(e._id)>=0?(_.splice(_.indexOf(e._id),1),void S((0,W.Z)(_))):(_[0]=e._id,void S((0,W.Z)(_))):_.indexOf(e._id)>=0?(_.splice(_.indexOf(e._id),1),void S((0,W.Z)(_))):(_.push(e._id),void S((0,W.Z)(_)))},shape:"circle",disabled:x.isVote,children:(0,Z.jsx)(Y,{fill:_.indexOf(e._id)>=0||e.isChoosen?"#0E7EE4":"white",width:v})})})]},e._id)})),(0,Z.jsxs)("div",{className:"vote_participants",children:[(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:5},children:[(0,Z.jsx)(K,{width:v}),(0,Z.jsx)("div",{className:"participants",children:"".concat((null===x||void 0===x||null===(m=x.vote)||void 0===m?void 0:m.quantity)||x.vote.quantity," ").concat(N(l.y0.participants))})]}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(u.Z,{type:"primary",className:"button_vote",onClick:P,loading:A,disabled:x.isVote,children:N(l.y0.vote2)}),(0,Z.jsx)(g,{openModal:V,setOpenModal:M})]})]})]})]})})),ee=function(e){var t,n,i=e.width,a=e.dataVote,r=e.setDataVote,o=e.selectEpsiodeFilm,d=e.seasonSelect,u=e.dataAllEpisodesAndSeasonOfFilm,p=(0,c.$)(),m=(0,s.Z)(p,1)[0];return(0,Z.jsx)("div",{children:(0,Z.jsxs)("div",{className:"desciption_vote ",children:[!a&&(0,Z.jsx)("div",{className:"loading_waiting_data_film",children:(0,Z.jsx)(E.Z,{})}),a&&(null===a||void 0===a||null===(t=a.voteOption)||void 0===t?void 0:t.length)>0&&(0,Z.jsx)(J,{dataVote:a,setDataVote:r,width:i}),a&&0==(null===a||void 0===a||null===(n=a.voteOption)||void 0===n?void 0:n.length)&&(0,Z.jsx)("div",{children:m(l.y0.haveNoVote)}),(0,Z.jsx)(R,{selectEpsiodeFilm:o,seasonSelect:d,dataAllEpisodesAndSeasonOfFilm:u})]})})},te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC6SURBVHgBlZE9DoJAEIXfjBZbcgSOoB2deBMsqYg3gYpSbyJ2lNzAPQIlGsM4y482RtaXbDK7+WYz8x5hkpziAF2XCRBjPABR04sU67Q+zxwNcBmFCl60DPFdVsE9pbUdGvoyuv2AP03GbFf6e6KXBMsK5PG8sxBl8BQxdgyRDfwVM/4Uq0+VNy3SsAiuvnxPVDB3JtfaevDWBch0rFoXykKTnZgx6feImslg8+yc7udGZmNyOlSte3oBxJQ/HKfmhdYAAAAASUVORK5CYII=",ne=function(e){for(var t=e.funcInfomation,n=(e.width,[]),i=0,a=0;a<t.length;a++)n[i]||(n[i]=[]),n[i].push(t[a]),0!=a&&a%2==1&&i++;return(0,Z.jsx)("table",{children:n.map((function(e,t){var n=e.map((function(e,t){return(0,Z.jsxs)("td",{className:"content_detail_production_child",children:[(0,Z.jsx)("div",{className:"title",children:(0,k.DE)(e,"name")}),(0,Z.jsxs)("div",{className:"content",children:[!e&&(0,Z.jsx)(E.Z,{}),(0,k.DE)(e,"data")]})]},t)}));return(0,Z.jsx)("tr",{className:"content_detail_production",children:n},t)}))})},ie=function(e){var t,n=e.dataDetailSeason,i=e.width,a=(0,c.$)(),r=(0,s.Z)(a,1)[0];return(0,Z.jsx)("div",{children:(0,Z.jsxs)("div",{className:"desciption_cast",children:[(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{className:"desciption_cast_title",children:r(l.y0.cast)}),(0,Z.jsxs)(h.Z,{size:i>768?20:12,className:"show_desciption_cast",children:[!n&&(0,Z.jsx)(E.Z,{}),null===n||void 0===n||null===(t=n.programParticipants)||void 0===t?void 0:t.map((function(e){return(0,Z.jsxs)(h.Z,{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"},children:[(0,Z.jsx)(N.Z,{src:e.avatar,alt:"caster",className:"image_avatar"}),(0,Z.jsxs)("div",{style:{width:"100%"},children:[(0,Z.jsx)("div",{className:"name_actor",children:(0,k.DE)(e,"dataNameActor")||r(l.y0.noInformation)}),(0,Z.jsx)("div",{className:"name_character",children:(0,k.DE)(e,"dataNameCharacter")||r(l.y0.noInformation)})]})]},e._id)}))]})]}),(0,Z.jsxs)("div",{style:{paddingTop:78},children:[(0,Z.jsx)("div",{className:"desciption_cast_title",children:r(l.y0.storyline)}),n?(0,Z.jsx)("div",{className:"content_storyline",dangerouslySetInnerHTML:{__html:(0,k.DE)(n,"story").replaceAll("\n","<br>")}}):(0,Z.jsx)("div",{className:"content_storyline",children:(0,Z.jsx)(E.Z,{})})]}),(0,Z.jsxs)("div",{style:{padding:" 78px 0"},children:[(0,Z.jsx)("div",{className:"desciption_cast_title",children:r(l.y0.crew)}),(null===n||void 0===n?void 0:n.productInformation)&&(0,Z.jsx)(ne,{funcInfomation:null===n||void 0===n?void 0:n.productInformation,width:i})]})]})})},ae=O.Z.TabPane;var se=function(e){var t,n,i=e.idFilm,a=e.dataAllSeasonOfFilm,o=e.filmDetail,d=e.width,u=e.seasonSelect,p=e.setSeasonSelect,m=e.selectEpsiodeFilm,v=e.setSelectEpsiodeFilm,f=e.dataDetailSeason,h=e.dataAllEpisodesAndSeasonOfFilm,x=e.dataVote,g=e.setDataVote,j=e.playVideo,w=e.setPlayVideo,y=(0,c.$)(),b=(0,s.Z)(y,1)[0],_=(0,r.useState)("1"),S=(0,s.Z)(_,2),k=S[0],C=S[1],N=function(e){console.log(e),C(e)},D=function(e,t,n){return e||null===t||void 0===t||!t.category?n(l.y0.episodesTitle):n(0===["short movie","music video"].indexOf(t.category.name_eng)?l.y0.shortMovie:l.y0.musicVideo)}(!!(null!==o&&void 0!==o&&null!==(t=o.category)&&void 0!==t&&t.name_eng&&["short movie","music video"].indexOf(o.category.name_eng)<0),o,b);return(0,Z.jsxs)("div",{children:[d>768&&(0,Z.jsxs)(O.Z,{defaultActiveKey:k,onChange:N,children:[(0,Z.jsx)(ae,{tab:b(l.y0.details),children:(0,Z.jsx)(ie,{width:d,dataDetailSeason:f})},"1"),(0,Z.jsx)(ae,{tab:(0,Z.jsxs)("div",{style:{position:"relative"},children:[(0,Z.jsx)("div",{style:{color:"3"==k?"#fff":"#bdc5cb"},children:b(l.y0.vote)}),x&&!(null!==x&&void 0!==x&&x.isVote)&&(null===x||void 0===x||null===(n=x.voteOption)||void 0===n?void 0:n.length)>0&&(0,Z.jsx)("img",{src:te,alt:"redpoint",style:{position:"absolute",top:0,right:0,width:4}})]}),children:m&&(0,Z.jsx)(ee,{dataVote:x,setDataVote:g,width:d,seasonSelect:u,selectEpsiodeFilm:m,dataAllEpisodesAndSeasonOfFilm:h})},"3")]}),d<=768&&(0,Z.jsxs)(O.Z,{defaultActiveKey:k,onChange:N,children:[(0,Z.jsx)(ae,{tab:D,children:(0,Z.jsx)(A,{idFilm:i,dataAllSeasonOfFilm:a,width:d,dataAllEpisodesAndSeasonOfFilm:h,filmDetail:o,seasonSelect:u,setSeasonSelect:p,selectEpsiodeFilm:m,setSelectEpsiodeFilm:v,setPlayVideo:w,playVideo:j})},"1"),(0,Z.jsx)(ae,{tab:b(l.y0.description),children:(0,Z.jsx)(ie,{width:d,dataDetailSeason:f})},"2"),(0,Z.jsx)(ae,{tab:(0,Z.jsxs)("div",{style:{position:"relative"},children:[(0,Z.jsx)("div",{style:{color:"3"==k?"#fff":"#bdc5cb"},children:b(l.y0.vote)}),x&&!(null!==x&&void 0!==x&&x.isVote)&&(0,Z.jsx)("img",{src:te,alt:"redpoint",style:{position:"absolute",top:0,right:0,width:4}})]}),children:m&&(0,Z.jsx)(ee,{dataVote:x,setDataVote:g,width:d,seasonSelect:u,selectEpsiodeFilm:m,dataAllEpisodesAndSeasonOfFilm:h})},"3")]})]})},re=r.memo(se),oe=function(e){var t=e.fill,n=e.width;return(0,Z.jsx)(u.Z,{children:(0,Z.jsx)("svg",{width:n<=768?"5.3vw":"1.4vw",height:n<=768?"4.8vw":"1.4vw",viewBox:"0 0 20 26",fill:t,xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{d:"M19 25L9.99907 20L1 25V2C1 1.73478 1.10536 1.48043 1.29289 1.29289C1.48043 1.10536 1.73478 1 2 1H18C18.2652 1 18.5196 1.10536 18.7071 1.29289C18.8946 1.48043 19 1.73478 19 2V25Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},le=n(16383),ce=function(e){var t=e.fill,n=e.width;return(0,Z.jsx)(u.Z,{children:(0,Z.jsx)("svg",{width:n<=768?"5.3vw":"1.4vw",height:n<=768?"4.8vw":"1.4vw",viewBox:"0 0 27 26",fill:t,xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{d:"M7 25V11.8L11.8 1C13.7882 1 15.4 2.61177 15.4 4.6V9.4H22.6C23.3041 9.392 23.9762 9.69367 24.4382 10.225C24.9003 10.7564 25.1057 11.4638 25 12.16L23.344 22.96C23.1645 24.1433 22.1407 25.0135 20.944 25H7ZM7 25L3.796 24.9997C2.39021 25.0246 1.18847 23.9931 1 22.5997V14.1997C1.18847 12.8064 2.39021 11.6419 3.796 11.6668H7V25Z",stroke:"white",strokeWidth:"2",strokeLinejoin:"round"})})})},de=(0,m.$j)((function(e){return{account:v.w.account.select(e)}}))((function(e){var t=e.width,n=e.account,o=e.dataDetailFilm,d=e.fetchDetail,u=(0,c.$)(),p=(0,s.Z)(u,1)[0],m=(0,r.useState)(o.isLike),v=(0,s.Z)(m,2),f=v[0],x=v[1],j=(0,r.useState)(o.isbookmark),w=(0,s.Z)(j,2),y=w[0],b=w[1],_=(0,r.useState)(!1),S=(0,s.Z)(_,2),k=S[0],C=S[1],N=(0,r.useState)(!1),D=(0,s.Z)(N,2),E=D[0],A=D[1];return console.log(o.isbookmark),(0,r.useEffect)((function(){x(o.isLike),b(o.isbookmark)}),[o]),(0,Z.jsxs)(h.Z,{size:t>768?20:45,className:"like_share_save",children:[(0,Z.jsxs)("div",{className:"like",children:[(0,Z.jsx)("div",{onClick:(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return A(!0),e.abrupt("return");case 3:return e.next=5,(0,T.xc)({streamingID:o._id});case 5:200==e.sent.status&&d();case 7:case"end":return e.stop()}}),e)}))),"aria-hidden":"true",children:(0,Z.jsx)(ce,{fill:f?"#fff":"none",width:t})}),(0,Z.jsxs)("div",{className:"text_like",children:[!f&&p(l.y0.like),f&&p(l.y0.cancelLiked),(0,Z.jsx)("br",{}),(0,Z.jsx)("span",{children:null!==o&&void 0!==o&&o.like?o.like:0})]})]}),(0,Z.jsxs)("div",{className:"like",children:[(0,Z.jsx)("div",{onClick:(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return A(!0),e.abrupt("return");case 3:return e.next=5,(0,T.mq)({streamingID:o._id});case 5:200==e.sent.status&&d();case 7:case"end":return e.stop()}}),e)}))),"aria-hidden":"true",children:(0,Z.jsx)(oe,{fill:y?"#fff":"none",width:t})}),(0,Z.jsxs)("div",{className:"text_like",children:[!y&&p(l.y0.save),y&&p(l.y0.saved),(0,Z.jsx)("br",{}),(0,Z.jsx)("span",{children:null!==o&&void 0!==o&&o.bookmark?o.bookmark:0})]})]}),(0,Z.jsxs)("div",{className:"like",children:[(0,Z.jsx)(le.Z,{sharing:k,setSharing:C,width:t}),(0,Z.jsx)("div",{className:"text_like",children:p(l.y0.share)}),(0,Z.jsx)("br",{})]}),(0,Z.jsx)(g,{openModal:E,setOpenModal:A})]})})),ue=n(20510),pe=function(){return(0,Z.jsx)("svg",{width:"46",height:"50",viewBox:"0 0 76 90",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{d:"M73.9445 41.8003L6.45548 0.555592C5.88703 0.208193 5.23629 0.0185019 4.57021 0.00602859C3.90413 -0.00644466 3.24674 0.158751 2.66568 0.484624C2.08462 0.810497 1.60087 1.28528 1.26417 1.86014C0.927477 2.43499 0.75 3.08917 0.75 3.75537V86.2447C0.75 86.9109 0.927477 87.5651 1.26417 88.1399C1.60087 88.7148 2.08462 89.1896 2.66568 89.5155C3.24674 89.8413 3.90413 90.0065 4.57021 89.9941C5.23629 89.9816 5.88703 89.7919 6.45548 89.4445L73.9445 48.1998C74.4927 47.8648 74.9456 47.3947 75.2598 46.8344C75.574 46.2741 75.739 45.6424 75.739 45C75.739 44.3576 75.574 43.726 75.2598 43.1657C74.9456 42.6054 74.4927 42.1353 73.9445 41.8003Z",fill:"white"})})},me=n(26170);var ve=(0,m.$j)((function(e){return{account:v.w.account.select(e)}}))((function(e){var t,n=e.account,d=(0,c.$)(),p=(0,s.Z)(d,1)[0],m=(0,o.UO)().id,v=(0,r.useState)(null),f=(0,s.Z)(v,2),h=f[0],j=f[1],w=(0,r.useState)(null),y=(0,s.Z)(w,2),_=y[0],C=y[1],N=(0,r.useState)(!1),D=(0,s.Z)(N,2),I=D[0],O=D[1],V=(0,r.useState)(null),M=(0,s.Z)(V,2),L=M[0],B=M[1],q=(0,r.useState)(null),G=(0,s.Z)(q,2),P=G[0],z=G[1],H=(0,r.useState)(!1),R=(0,s.Z)(H,2),W=R[0],$=R[1],U=(0,r.useState)(null),Y=(0,s.Z)(U,2),X=Y[0],K=Y[1],Q=(0,r.useState)(null),J=(0,s.Z)(Q,2),ee=J[0],te=J[1],ne=(0,r.useState)(null),ie=(0,s.Z)(ne,2),ae=ie[0],se=ie[1],oe=(0,r.useState)(!1),le=(0,s.Z)(oe,2),ce=le[0],ve=le[1],fe=(0,x.Z)().width,he=(0,r.useCallback)((0,a.Z)((0,i.Z)().mark((function e(){var t,a,s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=7;break}return e.next=3,(0,T.GM)(m);case 3:200==(t=e.sent).status&&B(null===(a=t.data)||void 0===a?void 0:a.data),e.next=11;break;case 7:return e.next=9,(0,T.AE)(m);case 9:200==(s=e.sent).status&&B(null===(r=s.data)||void 0===r?void 0:r.data);case 11:case"end":return e.stop()}}),e)}))),[m,n]),xe=(0,r.useCallback)((0,a.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.S9)({streamingID:m});case 2:200==(t=e.sent).status&&K(null===(n=t.data)||void 0===n?void 0:n.data);case 4:case"end":return e.stop()}}),e)}))),[m]),Ze=(0,r.useCallback)((0,a.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.WT)({streamingID:m});case 2:200==(t=e.sent).status&&z(null===(n=t.data)||void 0===n?void 0:n.data);case 4:case"end":return e.stop()}}),e)}))),[m]);return(0,r.useEffect)((function(){B(null),he(),xe(),Ze()}),[m,n,he,xe,Ze]),(0,r.useEffect)((function(){if(te(null),P&&_){var e,t=null===(e=P.filter((function(e){return e.number==_}))[0])||void 0===e?void 0:e._id,n=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.CL)(t);case 2:200==(n=e.sent).status&&te(null===(a=n.data)||void 0===a?void 0:a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n()}}),[P,_]),(0,r.useEffect)((function(){var e,t;if(se(null),X){var s=null===(e=X.filter((function(e){return e.numberSeason==_}))[0])||void 0===e?void 0:e.seasonID,r=null===X||void 0===X||null===(t=X.filter((function(e){return e.number==h&&e.numberSeason==_}))[0])||void 0===t?void 0:t._id;if(s&&r){!function(e){S.apply(this,arguments)}({streamingID:m,seasonID:s,streamingEpisodesID:r});var o=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,a,o,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,(0,T.Ad)({streamingID:m,seasonID:s,streamingEpisodesID:r});case 3:return 200==(t=e.sent).status&&se(null===(a=t.data)||void 0===a?void 0:a.data),e.abrupt("return");case 6:return e.next=8,(0,T.bn)({streamingID:m,seasonID:s,streamingEpisodesID:r});case 8:return 200==(o=e.sent).status&&se(null===(l=o.data)||void 0===l?void 0:l.data),e.abrupt("return");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();o()}}}),[X,m,_,h,n]),(0,r.useEffect)((function(){ve(!1),$(!1)}),[h]),(0,r.useEffect)((function(){var e;P&&C(null===(e=P[0])||void 0===e?void 0:e.number)}),[P]),(0,r.useEffect)((function(){var e,t;X&&j(null===(e=X.filter((function(e){return e.numberSeason==_})))||void 0===e||null===(t=e.reverse()[0])||void 0===t?void 0:t.number)}),[X,_]),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(me.Z,{title:L&&(0,k.DE)(L,"title"),description:L&&(0,k.DE)(L,"story"),metaImage:L&&(0,k.ue)(L,fe>768?"representativeImageWeb":"representativeImageMobile")}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{className:"main_film_detail",children:(0,Z.jsxs)("div",{className:"show_video_and_basic_infomation_episodes",children:[!L&&(0,Z.jsx)("div",{className:"loading_waiting_data_film",children:(0,Z.jsx)(E.Z,{})}),L&&(0,Z.jsxs)("div",{className:"show_video_and_basic_infomation",children:[(0,Z.jsxs)("div",{className:"show_video none_button ",onClick:function(){if(n){if(!ce){var e,t,i=null===X||void 0===X||null===(e=X.filter((function(e){return e.numberSeason==_}))[0])||void 0===e?void 0:e.seasonID,a=null===X||void 0===X||null===(t=X.filter((function(e){return e.number==h&&e.numberSeason==_}))[0])||void 0===t?void 0:t._id;a||$(!0),i&&a&&b({streamingID:m,seasonID:i,streamingEpisodesID:a})}ve(!0)}else O(!0)},"aria-hidden":"true",children:[!ce&&(0,Z.jsx)("div",{className:"button_play",children:(0,Z.jsx)("div",{className:"play_button_video",children:(0,Z.jsx)(pe,{})})}),W&&(0,Z.jsx)("div",{className:"button_play",children:(0,Z.jsx)("div",{className:"play_button_video",children:p(l.y0.haveNoData)})}),(0,Z.jsx)(ue.Z,{width:"100%",playing:ce,controls:!0,height:fe>768?558*fe/994*2/4:8*fe/11,light:!ce&&(0,k.ue)(L,fe>768?"thumbnailImageWeb":"thumbnailImageMobile").replaceAll(" ","%20"),url:null===X||void 0===X||null===(t=X.filter((function(e){return e.number==h&&e.numberSeason==_}))[0])||void 0===t?void 0:t.url})]}),(0,Z.jsx)(g,{openModal:I,setOpenModal:O}),(0,Z.jsxs)("div",{style:{position:"relative"},children:[(0,Z.jsx)(F,{filmDetail:L,seasonSelect:_,selectEpsiodeFilm:h}),(0,Z.jsx)("div",{style:fe>768?{position:"absolute",top:0,right:0}:{},children:(0,Z.jsx)(de,{width:fe,dataDetailFilm:L,fetchDetail:he})})]})]}),fe>768&&(0,Z.jsx)("div",{className:"episodes",children:(0,Z.jsx)(A,{idFilm:m,width:fe,dataAllSeasonOfFilm:P,filmDetail:L,dataAllEpisodesAndSeasonOfFilm:X,seasonSelect:_,setSeasonSelect:C,selectEpsiodeFilm:h,setSelectEpsiodeFilm:j,playVideo:ce,setPlayVideo:ve})})]})}),fe<=768?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("div",{style:{display:"flex",justifyContent:"center",padding:"10px 0",position:"relative"},children:[(0,Z.jsx)(u.Z,{type:"primary",style:{width:"86%",height:56,margin:"0 3% 20px 3%",fontSize:16,zIndex:1},onClick:function(){n?(ve(!0),window.scrollTo({top:0,left:0,behavior:"smooth"})):O(!0)},children:p(l.y0.play)}),(0,Z.jsx)(g,{openModal:I,setOpenModal:O})]}),(0,Z.jsx)("div",{className:"tab_infomation",children:(0,Z.jsx)(re,{idFilm:m,dataAllSeasonOfFilm:P,dataVote:ae,setDataVote:se,dataAllEpisodesAndSeasonOfFilm:X,dataDetailSeason:ee,filmDetail:L,width:fe,seasonSelect:_,setSeasonSelect:C,selectEpsiodeFilm:h,setSelectEpsiodeFilm:j,playVideo:ce,setPlayVideo:ve})})]}):(0,Z.jsx)("div",{className:"tab_infomation",children:(0,Z.jsx)(re,{filmDetail:L,dataVote:ae,setDataVote:se,width:fe,seasonSelect:_,dataAllEpisodesAndSeasonOfFilm:X,dataDetailSeason:ee,setSeasonSelect:C,selectEpsiodeFilm:h,setSelectEpsiodeFilm:j})})]})]})}))},68054:function(e,t,n){n.d(t,{Z:function(){return f}});var i=n(74165),a=n(1413),s=n(15861);n(88363),n(52902);function r(e){var t,n="undefined"===typeof e&&localStorage?localStorage.getItem("authentication.accessToken"):e;try{n&&(t=JSON.parse(n))}catch(i){t=n}return"string"===typeof t?[t]:t}var o=n(31881),l=n.n(o),c=n(41905),d=n(61724),u=n(95143),p=n(66376),m=n(57019),v=l().create({baseURL:"http://43.200.140.248:3000",timeout:4e3,withCredentials:!1});v.interceptors.request.use(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"undefined"!==typeof window&&(n=r(),s=(0,a.Z)({},t.headers),n&&(s.Authorization="Bearer ".concat(n)),s["X-Requested-With"]="XMLHttpRequest",s["Content-Type"]="application/json",s["Accept-Language"]="korean"===c.Z.language?"kr":"en",t.headers=s),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),v.interceptors.response.use(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("axios interceptor 1"),"undefined"!==typeof window||console.log("response.status.server",t.status),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("axios interceptor 2"),console.log(t),"undefined"===typeof window){e.next=8;break}if(401!==t.response.status||t.request.responseURL.includes("/user/logout")){e.next=8;break}return d.Z.error(c.Z.t(u.N3.unauthentication)),console.log(t.response.status),e.next=8,p.Z.dispatch((0,m.zx)());case 8:return e.abrupt("return",{response:t.response,data:t.response.data});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var f=function(e,t){return v.request((0,a.Z)((0,a.Z)({},t),{},{url:e}))}},77561:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(29439),a=n(30646),s=n(47313),r=n(46417);function o(e){var t=e.number,n=e.color,o=s.useState(1),l=(0,i.Z)(o,2),c=l[0],d=l[1];return s.useEffect((function(){var e=setInterval((function(){d((function(e){return e>=t?t:e+1}))}),1);return function(){clearInterval(e)}}),[t]),(0,r.jsx)(a.Z,{percent:c,strokeColor:n,trailColor:"#888F95",showInfo:!1})}}}]);